"use strict";var burger=document.querySelector(".header__burger"),burgerBar=document.querySelectorAll(".header__burger div"),content=document.querySelector(".header__burger-content");if(burger.addEventListener("click",function(e){e.preventDefault();for(var t=0;t<burgerBar.length;t++)burgerBar[t].classList.toggle("change");content.classList.toggle("is-active")}),document.querySelector("body").classList.contains("page-id-5")||document.querySelector("body").classList.contains("page-id-7")){var vid=document.querySelector(".video-intro__player video"),vid_fade=document.querySelector(".video-intro__fade-effect"),btn_play=document.querySelector(".video-intro__button"),vid_name=document.querySelector(".video-intro__page-name"),vid_title=document.querySelector(".video-intro__title"),vid_bg=document.querySelector(".video-intro__bg"),vid_txt=document.querySelector(".video-intro__paragraph");btn_play.addEventListener("click",function(e){e.preventDefault(),vid.paused?(vid_fade.classList.add("active"),vid_name.style.opacity=0,vid_title.style.opacity=0,vid_txt.style.opacity=0,btn_play.style.opacity=0,vid_bg.style.display="none",vid.play()):(vid_fade.classList.remove("active"),vid.pause())}),vid_fade.addEventListener("click",function(e){e.preventDefault(),vid.paused||(vid_fade.classList.remove("active"),vid.pause(),vid_name.style.opacity=1,vid_title.style.opacity=1,vid_txt.style.opacity=1,btn_play.style.opacity=1)})}if(document.querySelector("body").classList.contains("home")){var previous=function(){slides_container.style.transform="translate(0)",setTimeout(function(){slides_container.className+=" slider__slides--return",slides_container.style.transform="translate(calc(-100%/"+slides.length+"))",slides[0].before(slides[slides.length-1]),slides=[].slice.call(slider.querySelectorAll(".slider__slide"))},300),slides_container.classList.remove("slider__slides--return"),tiles_container.querySelector(".tile--active").classList.remove("tile--active"),tiles[slides[0].getAttribute("index")].className+=" tile--active"},next=function(){slides_container.style.transform="translate(calc(-200%/"+slides.length+"))",setTimeout(function(){slides_container.className+=" slider__slides--return",slides_container.style.transform="translate(calc(-100%/"+slides.length+"))",slides[slides.length-1].after(slides[0]),slides=[].slice.call(slider.querySelectorAll(".slider__slide"))},300),slides_container.classList.remove("slider__slides--return"),tiles_container.querySelector(".tile--active").classList.remove("tile--active"),tiles[slides[2].getAttribute("index")].className+=" tile--active"},previous2=function(){slides_container2.style.transform="translate(0)",setTimeout(function(){slides_container2.className+=" slider2__slides--return",slides_container2.style.transform="translate(calc(-100%/"+slides2.length+"))",slides2[0].before(slides2[slides2.length-1]),slides2=[].slice.call(slider2.querySelectorAll(".slider2__slide"))},300),slides_container2.classList.remove("slider2__slides--return")},next2=function(){slides_container2.style.transform="translate(calc(-200%/"+slides2.length+"))",setTimeout(function(){slides_container2.className+=" slider2__slides--return",slides_container2.style.transform="translate(calc(-100%/"+slides2.length+"))",slides2[slides2.length-1].after(slides2[0]),slides2=[].slice.call(slider2.querySelectorAll(".slider2__slide"))},300),slides_container2.classList.remove("slider2__slides--return")},i=0,slider=document.querySelector(".slider"),slides_container=slider.querySelector(".slider__slides"),slides=[].slice.call(slider.querySelectorAll(".slider__slide")),controllers=slider.querySelector(".slider__controllers"),prev_button=controllers.querySelector(".controllers__prev"),next_button=controllers.querySelector(".controllers__next"),tiles_container=controllers.querySelector(".controllers__tiles"),tiles=[].slice.call(tiles_container.querySelectorAll(".tile"));slides_container.style.width=100*slides.length+"%",slides_container.style.transform="translate(calc(-100%/"+slides.length+"))",prev_button.addEventListener("click",function(e){e.preventDefault(),previous()}),next_button.addEventListener("click",function(e){e.preventDefault(),next()}),tiles_container.addEventListener("click",function(e){if(e.preventDefault(),void 0!==tiles[tiles.indexOf(e.target)]&&!tiles[tiles.indexOf(e.target)].classList.contains("tile--active")){tiles_container.querySelector(".tile--active").classList.remove("tile--active"),e.target.className+=" tile--active";var t=slides.indexOf(slides_container.querySelector('[index="'+tiles.indexOf(e.target)+'"]'));t<1?previous():t>1&&next()}});var autoSlide=setInterval(next,5e3);slider.addEventListener("mouseover",function(){clearInterval(autoSlide)}),slider.addEventListener("mouseout",function(){autoSlide=setInterval(next,5e3)});var slider2=document.querySelector(".slider2"),slides_container2=slider2.querySelector(".slider2__slides"),slides2=[].slice.call(slider2.querySelectorAll(".slider2__slide")),controllers2=slider2.querySelector(".slider2__controllers2"),prev_button2=controllers2.querySelector(".controllers2__prev"),next_button2=controllers2.querySelector(".controllers2__next");slides_container2.style.width=100*slides2.length+"%",slides_container2.style.transform="translate(calc(-100%/"+slides2.length+"))",prev_button2.addEventListener("click",function(e){e.preventDefault(),previous2()}),next_button2.addEventListener("click",function(e){e.preventDefault(),next2()});var autoSlide2=setInterval(next2,5e3);slider2.addEventListener("mouseover",function(){clearInterval(autoSlide2)}),slider2.addEventListener("mouseout",function(){autoSlide2=setInterval(next2,5e3)});var height=0;document.querySelectorAll(".stories").forEach(function(e){e.offsetHeight>height&&(height=e.offsetHeight)}),slides2.forEach(function(e){e.style.height=height+"px"}),document.querySelectorAll(".stories").forEach(function(e){e.style.height=height+"px"}),window.addEventListener("resize",function(){var e=0;document.querySelectorAll(".stories").forEach(function(t){t.offsetHeight>e&&(e=t.offsetHeight)}),slides2.forEach(function(t){t.style.height=e+"px"}),document.querySelectorAll(".stories").forEach(function(t){t.style.height=e+"px"})})}if(document.querySelector("body").classList.contains("page-id-5")){var _previous=function(){_slides_container.querySelector(".slider__slide--active").classList.remove("slider__slide--active"),_slides[0].className+=" slider__slide--active",_slides_container.style.transform="translate(calc((-50%/"+_slides.length+") + (2* (50%/"+_slides.length+")))",setTimeout(function(){_slides_container.className+=" slider__slides--return",_slides_container.style.transform="translate(calc(-50%/"+_slides.length+"))",_slides[0].before(_slides[_slides.length-1]),_slides=[].slice.call(_slider.querySelectorAll(".slider__slide"))},300),_slides_container.classList.remove("slider__slides--return"),_tiles_container.querySelector(".tile--active").classList.remove("tile--active"),_tiles[_slides[0].getAttribute("index")].className+=" tile--active"},_next=function(){_slides_container.querySelector(".slider__slide--active").classList.remove("slider__slide--active"),_slides[2].className+=" slider__slide--active",_slides_container.style.transform="translate(calc((-50%/"+_slides.length+") - (2* (50%/"+_slides.length+")))",setTimeout(function(){_slides_container.className+=" slider__slides--return",_slides_container.style.transform="translate(calc(-50%/"+_slides.length+"))",_slides[_slides.length-1].after(_slides[0]),_slides=[].slice.call(_slider.querySelectorAll(".slider__slide"))},300),_slides_container.classList.remove("slider__slides--return"),_tiles_container.querySelector(".tile--active").classList.remove("tile--active"),_tiles[_slides[2].getAttribute("index")].className+=" tile--active"},_i=0,_slider=document.querySelector(".slider-concept"),_slides_container=_slider.querySelector(".slider__slides"),_slides=[].slice.call(_slider.querySelectorAll(".slider__slide")),_controllers=_slider.querySelector(".slider__controllers"),_prev_button=_controllers.querySelector(".controllers__prev"),_next_button=_controllers.querySelector(".controllers__next"),_tiles_container=_controllers.querySelector(".controllers__tiles"),_tiles=[].slice.call(_tiles_container.querySelectorAll(".tile"));_slides_container.style.width=50*_slides.length+"%",_slides_container.style.transform="translate(calc(-50%/"+_slides.length+"))",_slides[1].className+=" slider__slide--active",_prev_button.addEventListener("click",function(e){e.preventDefault(),_previous()}),_next_button.addEventListener("click",function(e){e.preventDefault(),_next()}),_tiles_container.addEventListener("click",function(e){if(e.preventDefault(),void 0!==_tiles[_tiles.indexOf(e.target)]&&!_tiles[_tiles.indexOf(e.target)].classList.contains("tile--active")){_tiles_container.querySelector(".tile--active").classList.remove("tile--active"),e.target.className+=" tile--active";var t=_slides.indexOf(_slides_container.querySelector('[index="'+_tiles.indexOf(e.target)+'"]'));t<1?_previous():t>1&&_next()}});var _autoSlide=setInterval(_next,5e3);_slider.addEventListener("mouseover",function(){clearInterval(_autoSlide)}),_slider.addEventListener("mouseout",function(){_autoSlide=setInterval(_next,5e3)})}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiYnVyZ2VyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYnVyZ2VyQmFyIiwicXVlcnlTZWxlY3RvckFsbCIsImNvbnRlbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInByZXZlbnREZWZhdWx0IiwiaSIsImxlbmd0aCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImNvbnRhaW5zIiwidmlkIiwidmlkX2ZhZGUiLCJidG5fcGxheSIsInZpZF9uYW1lIiwidmlkX3RpdGxlIiwidmlkX2JnIiwidmlkX3R4dCIsInBhdXNlZCIsImFkZCIsInN0eWxlIiwib3BhY2l0eSIsImRpc3BsYXkiLCJwbGF5IiwicmVtb3ZlIiwicGF1c2UiLCJwcmV2aW91cyIsInNsaWRlc19jb250YWluZXIiLCJ0cmFuc2Zvcm0iLCJzZXRUaW1lb3V0IiwiY2xhc3NOYW1lIiwic2xpZGVzIiwiYmVmb3JlIiwic2xpY2UiLCJjYWxsIiwic2xpZGVyIiwidGlsZXNfY29udGFpbmVyIiwidGlsZXMiLCJnZXRBdHRyaWJ1dGUiLCJuZXh0IiwiYWZ0ZXIiLCJwcmV2aW91czIiLCJzbGlkZXNfY29udGFpbmVyMiIsInNsaWRlczIiLCJzbGlkZXIyIiwibmV4dDIiLCJjb250cm9sbGVycyIsInByZXZfYnV0dG9uIiwibmV4dF9idXR0b24iLCJ3aWR0aCIsInVuZGVmaW5lZCIsImluZGV4T2YiLCJ0YXJnZXQiLCJwbGFjZSIsImF1dG9TbGlkZSIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsImNvbnRyb2xsZXJzMiIsInByZXZfYnV0dG9uMiIsIm5leHRfYnV0dG9uMiIsImF1dG9TbGlkZTIiLCJoZWlnaHQiLCJmb3JFYWNoIiwiZWwiLCJvZmZzZXRIZWlnaHQiLCJ3aW5kb3ciXSwibWFwcGluZ3MiOiJhQU1BLElBQUFBLE9BQUFDLFNBQUFDLGNBQUEsbUJBQ0FDLFVBQUFGLFNBQUFHLGlCQUFBLHVCQUNBQyxRQUFBSixTQUFBQyxjQUFBLDJCQWtC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Q0EzQixZQUVBMkIsRUFBQSxHQUNBZCxXQXFDQSxJQUFBZSxXQUFBQyxZQUFBaEIsTUFBQSxLQUVBSixRQUFBaEMsaUJBQUEsWUFBQSxXQUNBcUQsY0FBQUYsY0FHQW5CLFFBQUFoQyxpQkFBQSxXQUFBLFdBQ0FtRCxXQUFBQyxZQUFBaEIsTUFBQSIsImZpbGUiOiJzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiogXG5cbiAgICBNRU5VIEJVUkdFUlxuXG4qL1xuXG5jb25zdCBidXJnZXIgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19idXJnZXInKSxcbiAgICAgIGJ1cmdlckJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5oZWFkZXJfX2J1cmdlciBkaXYnKSxcbiAgICAgIGNvbnRlbnQgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2J1cmdlci1jb250ZW50JylcblxuYnVyZ2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+XG57XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBidXJnZXJCYXIubGVuZ3RoOyBpKyspXG4gICAge1xuICAgICAgICBidXJnZXJCYXJbaV0uY2xhc3NMaXN0LnRvZ2dsZShcImNoYW5nZVwiKVxuICAgIH1cbiAgICBjb250ZW50LmNsYXNzTGlzdC50b2dnbGUoXCJpcy1hY3RpdmVcIilcbn0pXG5cbi8qKiBcblxuICAgIFZJREVPIENPTkNFUFQgJiBWSVNJT05cblxuKi9cblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5jbGFzc0xpc3QuY29udGFpbnMoJ3BhZ2UtaWQtNScpwqAgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLmNsYXNzTGlzdC5jb250YWlucygncGFnZS1pZC03JykpXG57XG4gICAgY29uc3QgdmlkICAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZpZGVvLWludHJvX19wbGF5ZXIgdmlkZW8nKSxcbiAgICAgICAgICB2aWRfZmFkZSAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmlkZW8taW50cm9fX2ZhZGUtZWZmZWN0JyksXG4gICAgICAgICAgYnRuX3BsYXkgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZpZGVvLWludHJvX19idXR0b24nKSxcbiAgICAgICAgICB2aWRfbmFtZSAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmlkZW8taW50cm9fX3BhZ2UtbmFtZScpLFxuICAgICAgICAgIHZpZF90aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52aWRlby1pbnRyb19fdGl0bGUnKSxcbiAgICAgICAgICB2aWRfYmcgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmlkZW8taW50cm9fX2JnJyksXG4gICAgICAgICAgdmlkX3R4dCAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZpZGVvLWludHJvX19wYXJhZ3JhcGgnKVxuXG4gICAgYnRuX3BsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT5cbiAgICB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICBpZiAodmlkLnBhdXNlZClcbiAgICAgICAge1xuICAgICAgICAgICAgdmlkX2ZhZGUuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcbiAgICAgICAgICAgIHZpZF9uYW1lLnN0eWxlLm9wYWNpdHkgPSAwXG4gICAgICAgICAgICB2aWRfdGl0bGUuc3R5bGUub3BhY2l0eSA9IDBcbiAgICAgICAgICAgIHZpZF90eHQuc3R5bGUub3BhY2l0eSA9IDBcbiAgICAgICAgICAgIGJ0bl9wbGF5LnN0eWxlLm9wYWNpdHkgPSAwXG4gICAgICAgICAgICB2aWRfYmcuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgICAgICAgdmlkLnBsYXkoKVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZpZF9mYWRlLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXG4gICAgICAgICAgICB2aWQucGF1c2UoKVxuICAgICAgICB9XG4gICAgfSlcblxuICAgIHZpZF9mYWRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+XG4gICAge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgaWYgKHZpZC5wYXVzZWQpIFxuICAgICAgICB7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBcbiAgICAgICAge1xuICAgICAgICAgICAgdmlkX2ZhZGUuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcbiAgICAgICAgICAgIHZpZC5wYXVzZSgpXG4gICAgICAgICAgICB2aWRfbmFtZS5zdHlsZS5vcGFjaXR5ID0gMVxuICAgICAgICAgICAgdmlkX3RpdGxlLnN0eWxlLm9wYWNpdHkgPSAxXG4gICAgICAgICAgICB2aWRfdHh0LnN0eWxlLm9wYWNpdHkgPSAxXG4gICAgICAgICAgICBidG5fcGxheS5zdHlsZS5vcGFjaXR5ID0gMVxuICAgICAgICB9XG4gICAgfSlcbn1cblxuLyoqIFxuXG4gICAgU0xJREVSUyBIT01FXG5cbiovXG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JykuY2xhc3NMaXN0LmNvbnRhaW5zKCdob21lJykpXG57XG4gIGxldCBpID0gMFxuICBjb25zdCBzbGlkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyJylcbiAgY29uc3Qgc2xpZGVzX2NvbnRhaW5lciA9IHNsaWRlci5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19zbGlkZXMnKVxuICBsZXQgc2xpZGVzID0gW10uc2xpY2UuY2FsbChzbGlkZXIucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlcl9fc2xpZGUnKSlcbiAgY29uc3QgY29udHJvbGxlcnMgPSBzbGlkZXIucXVlcnlTZWxlY3RvcignLnNsaWRlcl9fY29udHJvbGxlcnMnKVxuICBjb25zdCBwcmV2X2J1dHRvbiA9IGNvbnRyb2xsZXJzLnF1ZXJ5U2VsZWN0b3IoJy5jb250cm9sbGVyc19fcHJldicpXG4gIGNvbnN0IG5leHRfYnV0dG9uID0gY29udHJvbGxlcnMucXVlcnlTZWxlY3RvcignLmNvbnRyb2xsZXJzX19uZXh0JylcbiAgY29uc3QgdGlsZXNfY29udGFpbmVyID0gY29udHJvbGxlcnMucXVlcnlTZWxlY3RvcignLmNvbnRyb2xsZXJzX190aWxlcycpXG4gIGNvbnN0IHRpbGVzID0gW10uc2xpY2UuY2FsbCh0aWxlc19jb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnRpbGUnKSlcblxuICBzbGlkZXNfY29udGFpbmVyLnN0eWxlLndpZHRoID0gKHNsaWRlcy5sZW5ndGggKiAxMDApICsgJyUnXG4gIHNsaWRlc19jb250YWluZXIuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZShjYWxjKC0xMDAlLycgKyBzbGlkZXMubGVuZ3RoICsgJykpJ1xuXG4gIHByZXZfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+XG4gIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBwcmV2aW91cygpXG4gIH0pXG5cbiAgbmV4dF9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT5cbiAge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIG5leHQoKVxuICB9KVxuXG4gIHRpbGVzX2NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PlxuICB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgaWYgKHRpbGVzW3RpbGVzLmluZGV4T2YoZS50YXJnZXQpXSAhPT0gdW5kZWZpbmVkICYmICF0aWxlc1t0aWxlcy5pbmRleE9mKGUudGFyZ2V0KV0uY2xhc3NMaXN0LmNvbnRhaW5zKCd0aWxlLS1hY3RpdmUnKSkge1xuICAgICAgdGlsZXNfY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy50aWxlLS1hY3RpdmUnKS5jbGFzc0xpc3QucmVtb3ZlKCd0aWxlLS1hY3RpdmUnKVxuICAgICAgZS50YXJnZXQuY2xhc3NOYW1lICs9ICcgdGlsZS0tYWN0aXZlJ1xuXG4gICAgICBjb25zdCBwbGFjZSA9IHNsaWRlcy5pbmRleE9mKHNsaWRlc19jb250YWluZXIucXVlcnlTZWxlY3RvcignW2luZGV4PVwiJyArIHRpbGVzLmluZGV4T2YoZS50YXJnZXQpICsgJ1wiXScpKVxuICAgICAgaWYgKHBsYWNlIDwgMSkge1xuICAgICAgICBwcmV2aW91cygpXG4gICAgICB9XG4gICAgICBlbHNlIGlmIChwbGFjZSA+IDEpIHtcbiAgICAgICAgbmV4dCgpXG4gICAgICB9XG4gICAgfVxuICB9KVxuICBcbiAgZnVuY3Rpb24gcHJldmlvdXMoKSB7XG4gICAgc2xpZGVzX2NvbnRhaW5lci5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlKDApJ1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgc2xpZGVzX2NvbnRhaW5lci5jbGFzc05hbWUgKz0gJyBzbGlkZXJfX3NsaWRlcy0tcmV0dXJuJ1xuICAgICAgc2xpZGVzX2NvbnRhaW5lci5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlKGNhbGMoLTEwMCUvJyArIHNsaWRlcy5sZW5ndGggKyAnKSknXG4gICAgICBzbGlkZXNbMF0uYmVmb3JlKHNsaWRlc1tzbGlkZXMubGVuZ3RoLTFdKVxuICAgICAgc2xpZGVzID0gW10uc2xpY2UuY2FsbChzbGlkZXIucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlcl9fc2xpZGUnKSlcbiAgICB9LCAzMDApXG4gICAgc2xpZGVzX2NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZXJfX3NsaWRlcy0tcmV0dXJuJylcblxuICAgIHRpbGVzX2NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudGlsZS0tYWN0aXZlJykuY2xhc3NMaXN0LnJlbW92ZSgndGlsZS0tYWN0aXZlJylcbiAgICB0aWxlc1tzbGlkZXNbMF0uZ2V0QXR0cmlidXRlKCdpbmRleCcpXS5jbGFzc05hbWUgKz0gJyB0aWxlLS1hY3RpdmUnXG4gIH1cbiAgXG4gIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgc2xpZGVzX2NvbnRhaW5lci5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlKGNhbGMoLTIwMCUvJyArIHNsaWRlcy5sZW5ndGggKyAnKSknXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBzbGlkZXNfY29udGFpbmVyLmNsYXNzTmFtZSArPSAnIHNsaWRlcl9fc2xpZGVzLS1yZXR1cm4nXG4gICAgICBzbGlkZXNfY29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoY2FsYygtMTAwJS8nICsgc2xpZGVzLmxlbmd0aCArICcpKSdcbiAgICAgIHNsaWRlc1tzbGlkZXMubGVuZ3RoLTFdLmFmdGVyKHNsaWRlc1swXSlcbiAgICAgIHNsaWRlcyA9IFtdLnNsaWNlLmNhbGwoc2xpZGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXJfX3NsaWRlJykpXG4gICAgfSwgMzAwKVxuICAgIHNsaWRlc19jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGVyX19zbGlkZXMtLXJldHVybicpXG5cbiAgICB0aWxlc19jb250YWluZXIucXVlcnlTZWxlY3RvcignLnRpbGUtLWFjdGl2ZScpLmNsYXNzTGlzdC5yZW1vdmUoJ3RpbGUtLWFjdGl2ZScpXG4gICAgdGlsZXNbc2xpZGVzWzJdLmdldEF0dHJpYnV0ZSgnaW5kZXgnKV0uY2xhc3NOYW1lICs9ICcgdGlsZS0tYWN0aXZlJ1xuICB9XG4gIFxuICBsZXQgYXV0b1NsaWRlID0gc2V0SW50ZXJ2YWwobmV4dCwgNTAwMClcbiAgXG4gIHNsaWRlci5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsICgpID0+IHtcbiAgICBjbGVhckludGVydmFsKGF1dG9TbGlkZSlcbiAgfSlcbiAgXG4gIHNsaWRlci5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgKCkgPT4ge1xuICAgIGF1dG9TbGlkZSA9IHNldEludGVydmFsKG5leHQsIDUwMDApXG4gIH0pXG4gIFxuICBcbiAgY29uc3Qgc2xpZGVyMiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXIyJylcbiAgY29uc3Qgc2xpZGVzX2NvbnRhaW5lcjIgPSBzbGlkZXIyLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXIyX19zbGlkZXMnKVxuICBsZXQgc2xpZGVzMiA9IFtdLnNsaWNlLmNhbGwoc2xpZGVyMi5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVyMl9fc2xpZGUnKSlcbiAgY29uc3QgY29udHJvbGxlcnMyID0gc2xpZGVyMi5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyMl9fY29udHJvbGxlcnMyJylcbiAgY29uc3QgcHJldl9idXR0b24yID0gY29udHJvbGxlcnMyLnF1ZXJ5U2VsZWN0b3IoJy5jb250cm9sbGVyczJfX3ByZXYnKVxuICBjb25zdCBuZXh0X2J1dHRvbjIgPSBjb250cm9sbGVyczIucXVlcnlTZWxlY3RvcignLmNvbnRyb2xsZXJzMl9fbmV4dCcpXG5cbiAgc2xpZGVzX2NvbnRhaW5lcjIuc3R5bGUud2lkdGggPSAoc2xpZGVzMi5sZW5ndGggKiAxMDApICsgJyUnXG4gIHNsaWRlc19jb250YWluZXIyLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoY2FsYygtMTAwJS8nICsgc2xpZGVzMi5sZW5ndGggKyAnKSknXG5cbiAgcHJldl9idXR0b24yLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+XG4gIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBwcmV2aW91czIoKVxuICB9KVxuXG4gIG5leHRfYnV0dG9uMi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PlxuICB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgbmV4dDIoKVxuICB9KVxuICBcbiAgZnVuY3Rpb24gcHJldmlvdXMyKCkge1xuICAgIHNsaWRlc19jb250YWluZXIyLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoMCknXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBzbGlkZXNfY29udGFpbmVyMi5jbGFzc05hbWUgKz0gJyBzbGlkZXIyX19zbGlkZXMtLXJldHVybidcbiAgICAgIHNsaWRlc19jb250YWluZXIyLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoY2FsYygtMTAwJS8nICsgc2xpZGVzMi5sZW5ndGggKyAnKSknXG4gICAgICBzbGlkZXMyWzBdLmJlZm9yZShzbGlkZXMyW3NsaWRlczIubGVuZ3RoLTFdKVxuICAgICAgc2xpZGVzMiA9IFtdLnNsaWNlLmNhbGwoc2xpZGVyMi5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVyMl9fc2xpZGUnKSlcbiAgICB9LCAzMDApXG4gICAgc2xpZGVzX2NvbnRhaW5lcjIuY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGVyMl9fc2xpZGVzLS1yZXR1cm4nKVxuICB9XG4gIFxuICBmdW5jdGlvbiBuZXh0MigpIHtcbiAgICBzbGlkZXNfY29udGFpbmVyMi5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlKGNhbGMoLTIwMCUvJyArIHNsaWRlczIubGVuZ3RoICsgJykpJ1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgc2xpZGVzX2NvbnRhaW5lcjIuY2xhc3NOYW1lICs9ICcgc2xpZGVyMl9fc2xpZGVzLS1yZXR1cm4nXG4gICAgICBzbGlkZXNfY29udGFpbmVyMi5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlKGNhbGMoLTEwMCUvJyArIHNsaWRlczIubGVuZ3RoICsgJykpJ1xuICAgICAgc2xpZGVzMltzbGlkZXMyLmxlbmd0aC0xXS5hZnRlcihzbGlkZXMyWzBdKVxuICAgICAgc2xpZGVzMiA9IFtdLnNsaWNlLmNhbGwoc2xpZGVyMi5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVyMl9fc2xpZGUnKSlcbiAgICB9LCAzMDApXG4gICAgc2xpZGVzX2NvbnRhaW5lcjIuY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGVyMl9fc2xpZGVzLS1yZXR1cm4nKVxuICB9XG4gIFxuICBsZXQgYXV0b1NsaWRlMiA9IHNldEludGVydmFsKG5leHQyLCA1MDAwKVxuICBcbiAgc2xpZGVyMi5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsICgpID0+IHtcbiAgICBjbGVhckludGVydmFsKGF1dG9TbGlkZTIpXG4gIH0pXG4gIFxuICBzbGlkZXIyLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCAoKSA9PiB7XG4gICAgYXV0b1NsaWRlMiA9IHNldEludGVydmFsKG5leHQyLCA1MDAwKVxuICB9KVxuICBcblxuICBsZXQgaGVpZ2h0ID0gMDsgLy8gdGhlIGhlaWdodCBvZiB0aGUgaGlnaGVzdCBlbGVtZW50IChhZnRlciB0aGUgZnVuY3Rpb24gcnVucylcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnN0b3JpZXMnKS5mb3JFYWNoKChlbCkgPT4ge1xuICAgIGlmIChlbC5vZmZzZXRIZWlnaHQgPiBoZWlnaHQpIHtcbiAgICAgIGhlaWdodCA9IGVsLm9mZnNldEhlaWdodFxuICAgIH1cbiAgfSlcbiAgc2xpZGVzMi5mb3JFYWNoKChlbCkgPT4ge1xuICAgIGVsLnN0eWxlLmhlaWdodCA9IGhlaWdodCArICdweCdcbiAgfSlcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnN0b3JpZXMnKS5mb3JFYWNoKChlbCkgPT4ge1xuICAgIGVsLnN0eWxlLmhlaWdodCA9IGhlaWdodCArICdweCdcbiAgfSlcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgKCkgPT4ge1xuICAgIGxldCBoZWlnaHQgPSAwOyAvLyB0aGUgaGVpZ2h0IG9mIHRoZSBoaWdoZXN0IGVsZW1lbnQgKGFmdGVyIHRoZSBmdW5jdGlvbiBydW5zKVxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdG9yaWVzJykuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgIGlmIChlbC5vZmZzZXRIZWlnaHQgPiBoZWlnaHQpIHtcbiAgICAgICAgaGVpZ2h0ID0gZWwub2Zmc2V0SGVpZ2h0XG4gICAgICB9XG4gICAgfSlcbiAgICBzbGlkZXMyLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICBlbC5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyAncHgnXG4gICAgfSlcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc3RvcmllcycpLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICBlbC5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyAncHgnXG4gICAgfSlcbiAgfSlcbn1cblxuLyoqIFxuXG4gICAgU0xJREVSIENPTkNFUFRcblxuKi9cblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5jbGFzc0xpc3QuY29udGFpbnMoJ3BhZ2UtaWQtNScpKSB7XG4gIGxldCBpID0gMFxuICBjb25zdCBzbGlkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyLWNvbmNlcHQnKVxuICBjb25zdCBzbGlkZXNfY29udGFpbmVyID0gc2xpZGVyLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX3NsaWRlcycpXG4gIGxldCBzbGlkZXMgPSBbXS5zbGljZS5jYWxsKHNsaWRlci5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVyX19zbGlkZScpKVxuICBjb25zdCBjb250cm9sbGVycyA9IHNsaWRlci5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19jb250cm9sbGVycycpXG4gIGNvbnN0IHByZXZfYnV0dG9uID0gY29udHJvbGxlcnMucXVlcnlTZWxlY3RvcignLmNvbnRyb2xsZXJzX19wcmV2JylcbiAgY29uc3QgbmV4dF9idXR0b24gPSBjb250cm9sbGVycy5xdWVyeVNlbGVjdG9yKCcuY29udHJvbGxlcnNfX25leHQnKVxuICBjb25zdCB0aWxlc19jb250YWluZXIgPSBjb250cm9sbGVycy5xdWVyeVNlbGVjdG9yKCcuY29udHJvbGxlcnNfX3RpbGVzJylcbiAgY29uc3QgdGlsZXMgPSBbXS5zbGljZS5jYWxsKHRpbGVzX2NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcudGlsZScpKVxuXG4gIHNsaWRlc19jb250YWluZXIuc3R5bGUud2lkdGggPSAoc2xpZGVzLmxlbmd0aCAqIDUwKSArICclJ1xuICBzbGlkZXNfY29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoY2FsYygtNTAlLycgKyBzbGlkZXMubGVuZ3RoICsgJykpJ1xuICBcbiAgc2xpZGVzWzFdLmNsYXNzTmFtZSArPSAnIHNsaWRlcl9fc2xpZGUtLWFjdGl2ZSdcblxuICBwcmV2X2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgcHJldmlvdXMoKVxuICB9KVxuXG4gIG5leHRfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBuZXh0KClcbiAgfSlcblxuICB0aWxlc19jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIGlmICh0aWxlc1t0aWxlcy5pbmRleE9mKGUudGFyZ2V0KV0gIT09IHVuZGVmaW5lZCAmJiAhdGlsZXNbdGlsZXMuaW5kZXhPZihlLnRhcmdldCldLmNsYXNzTGlzdC5jb250YWlucygndGlsZS0tYWN0aXZlJykpIHtcbiAgICAgIHRpbGVzX2NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudGlsZS0tYWN0aXZlJykuY2xhc3NMaXN0LnJlbW92ZSgndGlsZS0tYWN0aXZlJylcbiAgICAgIGUudGFyZ2V0LmNsYXNzTmFtZSArPSAnIHRpbGUtLWFjdGl2ZSdcblxuICAgICAgY29uc3QgcGxhY2UgPSBzbGlkZXMuaW5kZXhPZihzbGlkZXNfY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ1tpbmRleD1cIicgKyB0aWxlcy5pbmRleE9mKGUudGFyZ2V0KSArICdcIl0nKSlcbiAgICAgIGlmIChwbGFjZSA8IDEpIHtcbiAgICAgICAgcHJldmlvdXMoKVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAocGxhY2UgPiAxKSB7XG4gICAgICAgIG5leHQoKVxuICAgICAgfVxuICAgIH1cbiAgfSlcbiAgXG4gIGZ1bmN0aW9uIHByZXZpb3VzKCkge1xuICAgIHNsaWRlc19jb250YWluZXIucXVlcnlTZWxlY3RvcignLnNsaWRlcl9fc2xpZGUtLWFjdGl2ZScpLmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlcl9fc2xpZGUtLWFjdGl2ZScpXG4gICAgc2xpZGVzWzBdLmNsYXNzTmFtZSArPSAnIHNsaWRlcl9fc2xpZGUtLWFjdGl2ZSdcbiAgICBzbGlkZXNfY29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoY2FsYygoLTUwJS8nICsgc2xpZGVzLmxlbmd0aCArICcpICsgKDIqICg1MCUvJyArIHNsaWRlcy5sZW5ndGggKyAnKSkpJ1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgc2xpZGVzX2NvbnRhaW5lci5jbGFzc05hbWUgKz0gJyBzbGlkZXJfX3NsaWRlcy0tcmV0dXJuJ1xuICAgICAgc2xpZGVzX2NvbnRhaW5lci5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlKGNhbGMoLTUwJS8nICsgc2xpZGVzLmxlbmd0aCArICcpKSdcbiAgICAgIHNsaWRlc1swXS5iZWZvcmUoc2xpZGVzW3NsaWRlcy5sZW5ndGgtMV0pXG4gICAgICBzbGlkZXMgPSBbXS5zbGljZS5jYWxsKHNsaWRlci5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVyX19zbGlkZScpKVxuICAgIH0sIDMwMClcbiAgICBzbGlkZXNfY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlcl9fc2xpZGVzLS1yZXR1cm4nKVxuXG4gICAgdGlsZXNfY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy50aWxlLS1hY3RpdmUnKS5jbGFzc0xpc3QucmVtb3ZlKCd0aWxlLS1hY3RpdmUnKVxuICAgIHRpbGVzW3NsaWRlc1swXS5nZXRBdHRyaWJ1dGUoJ2luZGV4JyldLmNsYXNzTmFtZSArPSAnIHRpbGUtLWFjdGl2ZSdcbiAgfVxuICBcbiAgZnVuY3Rpb24gbmV4dCgpIHtcbiAgICBzbGlkZXNfY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX3NsaWRlLS1hY3RpdmUnKS5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZXJfX3NsaWRlLS1hY3RpdmUnKVxuICAgIHNsaWRlc1syXS5jbGFzc05hbWUgKz0gJyBzbGlkZXJfX3NsaWRlLS1hY3RpdmUnXG4gICAgc2xpZGVzX2NvbnRhaW5lci5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlKGNhbGMoKC01MCUvJyArIHNsaWRlcy5sZW5ndGggKyAnKSAtICgyKiAoNTAlLycgKyBzbGlkZXMubGVuZ3RoICsgJykpKSdcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHNsaWRlc19jb250YWluZXIuY2xhc3NOYW1lICs9ICcgc2xpZGVyX19zbGlkZXMtLXJldHVybidcbiAgICAgIHNsaWRlc19jb250YWluZXIuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZShjYWxjKC01MCUvJyArIHNsaWRlcy5sZW5ndGggKyAnKSknXG4gICAgICBzbGlkZXNbc2xpZGVzLmxlbmd0aC0xXS5hZnRlcihzbGlkZXNbMF0pXG4gICAgICBzbGlkZXMgPSBbXS5zbGljZS5jYWxsKHNsaWRlci5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVyX19zbGlkZScpKVxuICAgIH0sIDMwMClcbiAgICBzbGlkZXNfY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlcl9fc2xpZGVzLS1yZXR1cm4nKVxuXG4gICAgdGlsZXNfY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy50aWxlLS1hY3RpdmUnKS5jbGFzc0xpc3QucmVtb3ZlKCd0aWxlLS1hY3RpdmUnKVxuICAgIHRpbGVzW3NsaWRlc1syXS5nZXRBdHRyaWJ1dGUoJ2luZGV4JyldLmNsYXNzTmFtZSArPSAnIHRpbGUtLWFjdGl2ZSdcbiAgfVxuICBcbiAgbGV0IGF1dG9TbGlkZSA9IHNldEludGVydmFsKG5leHQsIDUwMDApXG4gIFxuICBzbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCAoKSA9PiB7XG4gICAgY2xlYXJJbnRlcnZhbChhdXRvU2xpZGUpXG4gIH0pXG4gIFxuICBzbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsICgpID0+IHtcbiAgICBhdXRvU2xpZGUgPSBzZXRJbnRlcnZhbChuZXh0LCA1MDAwKVxuICB9KVxufVxuIl19
